<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CS Department Scheduler</title>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700;900&family=Work+Sans:wght@400;500;600&display=swap" rel="stylesheet">
    <style>
        :root {
            --terracotta: #C1502E;
            --deep-green: #1A4D2E;
            --golden: #E8A740;
            --cream: #F8F4E8;
            --charcoal: #2C2C2C;
            --sand: #E6D5B8;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Work Sans', sans-serif;
            background: linear-gradient(135deg, var(--cream) 0%, var(--sand) 100%);
            color: var(--charcoal);
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        header {
            background: var(--deep-green);
            padding: 40px;
            border-radius: 15px;
            margin-bottom: 30px;
            text-align: center;
        }
        
        h1 {
            font-family: 'Playfair Display', serif;
            font-size: 3rem;
            color: var(--golden);
            margin-bottom: 10px;
        }
        
        .subtitle {
            color: var(--cream);
            font-size: 1.2rem;
            letter-spacing: 1px;
        }
        
        .section {
            background: white;
            padding: 30px;
            border-radius: 15px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }
        
        .section-title {
            font-family: 'Playfair Display', serif;
            font-size: 1.8rem;
            color: var(--deep-green);
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 3px solid var(--terracotta);
        }
        
        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .form-group {
            display: flex;
            flex-direction: column;
        }
        
        label {
            font-weight: 600;
            color: var(--deep-green);
            margin-bottom: 8px;
            font-size: 0.9rem;
        }
        
        input, select {
            padding: 12px;
            border: 2px solid var(--sand);
            border-radius: 8px;
            font-size: 1rem;
            font-family: 'Work Sans', sans-serif;
            transition: border-color 0.3s;
        }
        
        input:focus, select:focus {
            outline: none;
            border-color: var(--terracotta);
        }
        
        .btn {
            padding: 14px 35px;
            font-size: 1rem;
            font-weight: 600;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, var(--terracotta), #9A3B3B);
            color: white;
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(193, 80, 46, 0.4);
        }
        
        .btn-secondary {
            background: linear-gradient(135deg, var(--deep-green), #5C6B1F);
            color: white;
        }
        
        .btn-secondary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(26, 77, 46, 0.4);
        }
        
        .btn-small {
            padding: 8px 20px;
            font-size: 0.9rem;
        }
        
        .list-container {
            margin-top: 20px;
            max-height: 300px;
            overflow-y: auto;
        }
        
        .list-item {
            background: var(--cream);
            padding: 15px;
            margin-bottom: 10px;
            border-radius: 8px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-left: 4px solid var(--golden);
        }
        
        .list-item-content {
            flex: 1;
        }
        
        .list-item-title {
            font-weight: 600;
            color: var(--deep-green);
            margin-bottom: 5px;
        }
        
        .list-item-details {
            font-size: 0.9rem;
            color: #666;
        }
        
        .delete-btn {
            background: var(--terracotta);
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.85rem;
        }
        
        .delete-btn:hover {
            background: #9A3B3B;
        }
        
        .schedule-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }
        
        .schedule-table th {
            background: var(--deep-green);
            color: white;
            padding: 12px;
            text-align: left;
            font-weight: 600;
        }
        
        .schedule-table td {
            padding: 12px;
            border-bottom: 1px solid var(--sand);
        }
        
        .schedule-table tr:hover {
            background: var(--cream);
        }
        
        .level-badge {
            background: var(--golden);
            color: white;
            padding: 4px 10px;
            border-radius: 12px;
            font-size: 0.85rem;
            font-weight: 600;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .stat-card {
            background: var(--cream);
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            border-top: 4px solid var(--terracotta);
        }
        
        .stat-value {
            font-family: 'Playfair Display', serif;
            font-size: 2.5rem;
            color: var(--deep-green);
            font-weight: 900;
        }
        
        .stat-label {
            color: #666;
            font-size: 0.9rem;
            margin-top: 5px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .hidden {
            display: none;
        }
        
        .info-box {
            background: rgba(26, 77, 46, 0.1);
            border-left: 4px solid var(--deep-green);
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
        }
        
        .button-group {
            display: flex;
            gap: 15px;
            margin-top: 20px;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>DELTA STATE UNIVERSITY | FACULTY OF COMPUTING CLASSROOM SCHEDULER</h1>
            <div class="subtitle">100-400 Level Course Scheduling</div>
        </header>
        
        <!-- Add Lecturer Section -->
        <div class="section">
            <h2 class="section-title">1. Add Lecturers</h2>
            <div class="info-box">
                Add lecturers and specify how many hours per week they can teach
            </div>
            
            <div class="form-grid">
                <div class="form-group">
                    <label for="lecturerName">Lecturer Name</label>
                    <input type="text" id="lecturerName" placeholder="e.g., Dr. Akazue M.I.">
                </div>
                <div class="form-group">
                    <label for="lecturerHours">Hours Per Week</label>
                    <input type="number" id="lecturerHours" placeholder="e.g., 12" min="2" max="20">
                </div>
            </div>
            
            <button class="btn btn-primary btn-small" onclick="addLecturer()">Add Lecturer</button>
            
            <div class="list-container" id="lecturersList"></div>
        </div>
        
        <!-- Add Course Section -->
        <div class="section">
            <h2 class="section-title">2. Add Courses</h2>
            <div class="info-box">
                Add courses for all levels (100, 200, 300, 400)
            </div>
            
            <div class="form-grid">
                <div class="form-group">
                    <label for="courseCode">Course Code</label>
                    <input type="text" id="courseCode" placeholder="e.g., CSC 101">
                </div>
                <div class="form-group">
                    <label for="courseTitle">Course Title</label>
                    <input type="text" id="courseTitle" placeholder="e.g., Introduction to CS">
                </div>
                <div class="form-group">
                    <label for="courseLevel">Level</label>
                    <select id="courseLevel">
                        <option value="100">100 Level</option>
                        <option value="200">200 Level</option>
                        <option value="300">300 Level</option>
                        <option value="400">400 Level</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="courseLecturer">Lecturer</label>
                    <select id="courseLecturer">
                        <option value="">Select Lecturer</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="courseEnrollment">Enrollment</label>
                    <input type="number" id="courseEnrollment" placeholder="e.g., 120" min="1">
                </div>
                <div class="form-group">
                    <label for="courseHours">Hours Per Week</label>
                    <input type="number" id="courseHours" placeholder="e.g., 4" min="2" max="8" step="2">
                </div>
            </div>
            
            <button class="btn btn-primary btn-small" onclick="addCourse()">Add Course</button>
            
            <div class="list-container" id="coursesList"></div>
        </div>
        
        <!-- Generate Schedule Section -->
        <div class="section">
            <h2 class="section-title">3. Generate Schedule</h2>
            <div class="button-group">
                <button class="btn btn-secondary" onclick="generateSchedule()">Generate Schedule</button>
                <button class="btn btn-primary" onclick="downloadData()">Download Input Data</button>
                <button class="btn btn-primary" onclick="clearAll()">Clear All Data</button>
            </div>
        </div>
        
        <!-- Results Section -->
        <div id="resultsSection" class="section hidden">
            <h2 class="section-title">Schedule Results</h2>
            
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-value" id="totalCourses">0</div>
                    <div class="stat-label">Total Courses</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="scheduledCount">0</div>
                    <div class="stat-label">Fully Scheduled</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="successRate">0%</div>
                    <div class="stat-label">Success Rate</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="totalSessions">0</div>
                    <div class="stat-label">Total Sessions</div>
                </div>
            </div>
            
            <div id="scheduleTableContainer"></div>
        </div>
    </div>
    
    <script>
        // Data storage
        let lecturers = [];
        let courses = [];
        
        // Load data from localStorage on page load
        window.onload = function() {
            loadData();
            updateLecturerDropdown();
            displayLecturers();
            displayCourses();
        };
        
        function loadData() {
            const savedLecturers = localStorage.getItem('lecturers');
            const savedCourses = localStorage.getItem('courses');
            
            if (savedLecturers) lecturers = JSON.parse(savedLecturers);
            if (savedCourses) courses = JSON.parse(savedCourses);
        }
        
        function saveData() {
            localStorage.setItem('lecturers', JSON.stringify(lecturers));
            localStorage.setItem('courses', JSON.stringify(courses));
            
            // Also save to downloadable JSON format
            const data = {
                lecturers: lecturers,
                courses: courses
            };
            
            // This would normally be saved to a file on the server
            // For now, we'll keep it in memory for the schedule generation
            window.userData = data;
        }
        
        function addLecturer() {
            const name = document.getElementById('lecturerName').value.trim();
            const hours = parseInt(document.getElementById('lecturerHours').value);
            
            if (!name || !hours) {
                alert('Please fill in all lecturer fields');
                return;
            }
            
            if (lecturers.some(l => l.name === name)) {
                alert('Lecturer already exists');
                return;
            }
            
            lecturers.push({
                name: name,
                hours_per_week: hours
            });
            
            saveData();
            displayLecturers();
            updateLecturerDropdown();
            
            // Clear form
            document.getElementById('lecturerName').value = '';
            document.getElementById('lecturerHours').value = '';
        }
        
        function deleteLecturer(index) {
            if (confirm('Delete this lecturer?')) {
                lecturers.splice(index, 1);
                saveData();
                displayLecturers();
                updateLecturerDropdown();
            }
        }
        
        function displayLecturers() {
            const container = document.getElementById('lecturersList');
            if (lecturers.length === 0) {
                container.innerHTML = '<p style="color: #666; font-style: italic;">No lecturers added yet</p>';
                return;
            }
            
            container.innerHTML = lecturers.map((lec, index) => `
                <div class="list-item">
                    <div class="list-item-content">
                        <div class="list-item-title">${lec.name}</div>
                        <div class="list-item-details">${lec.hours_per_week} hours per week</div>
                    </div>
                    <button class="delete-btn" onclick="deleteLecturer(${index})">Delete</button>
                </div>
            `).join('');
        }
        
        function updateLecturerDropdown() {
            const select = document.getElementById('courseLecturer');
            select.innerHTML = '<option value="">Select Lecturer</option>' + 
                lecturers.map(l => `<option value="${l.name}">${l.name}</option>`).join('');
        }
        
        function addCourse() {
            const code = document.getElementById('courseCode').value.trim();
            const title = document.getElementById('courseTitle').value.trim();
            const level = parseInt(document.getElementById('courseLevel').value);
            const lecturer = document.getElementById('courseLecturer').value;
            const enrollment = parseInt(document.getElementById('courseEnrollment').value);
            const hours = parseInt(document.getElementById('courseHours').value);
            
            if (!code || !title || !lecturer || !enrollment || !hours) {
                alert('Please fill in all course fields');
                return;
            }
            
            if (courses.some(c => c.course_code === code)) {
                alert('Course code already exists');
                return;
            }
            
            courses.push({
                course_code: code,
                title: title,
                level: level,
                lecturer: lecturer,
                enrollment: enrollment,
                hours_per_week: hours
            });
            
            saveData();
            displayCourses();
            
            // Clear form
            document.getElementById('courseCode').value = '';
            document.getElementById('courseTitle').value = '';
            document.getElementById('courseEnrollment').value = '';
            document.getElementById('courseHours').value = '';
        }
        
        function deleteCourse(index) {
            if (confirm('Delete this course?')) {
                courses.splice(index, 1);
                saveData();
                displayCourses();
            }
        }
        
        function displayCourses() {
            const container = document.getElementById('coursesList');
            if (courses.length === 0) {
                container.innerHTML = '<p style="color: #666; font-style: italic;">No courses added yet</p>';
                return;
            }
            
            container.innerHTML = courses.map((course, index) => `
                <div class="list-item">
                    <div class="list-item-content">
                        <div class="list-item-title">${course.course_code}: ${course.title}</div>
                        <div class="list-item-details">
                            <span class="level-badge">${course.level}L</span> • 
                            ${course.lecturer} • 
                            ${course.enrollment} students • 
                            ${course.hours_per_week} hrs/week
                        </div>
                    </div>
                    <button class="delete-btn" onclick="deleteCourse(${index})">Delete</button>
                </div>
            `).join('');
        }
        
        function generateSchedule() {
            if (lecturers.length === 0 || courses.length === 0) {
                alert('Please add lecturers and courses first');
                return;
            }
            
            // Run the scheduling algorithm (client-side simulation)
            const result = runSchedulingAlgorithm();
            displayResults(result);
        }
        
        function runSchedulingAlgorithm() {
            // Time slots
            const timeSlots = [
                ["Monday", "8 AM - 10 AM"], ["Monday", "10 AM - 12 PM"], 
                ["Monday", "12 PM - 2 PM"], ["Monday", "2 PM - 4 PM"],
                ["Tuesday", "8 AM - 10 AM"], ["Tuesday", "10 AM - 12 PM"],
                ["Tuesday", "12 PM - 2 PM"], ["Tuesday", "2 PM - 4 PM"],
                ["Wednesday", "8 AM - 10 AM"], ["Wednesday", "10 AM - 12 PM"],
                ["Thursday", "8 AM - 10 AM"], ["Thursday", "10 AM - 12 PM"],
                ["Thursday", "12 PM - 2 PM"], ["Thursday", "2 PM - 4 PM"],
                ["Friday", "8 AM - 10 AM"], ["Friday", "10 AM - 12 PM"],
                ["Friday", "12 PM - 2 PM"], ["Friday", "2 PM - 4 PM"]
            ];
            
            // Classrooms
            const classrooms = [
                {name: "Software Lab", capacity: 120},
                {name: "Hardware Lab", capacity: 100},
                {name: "New Hall A", capacity: 200},
                {name: "New Hall B", capacity: 200},
                {name: "New Hall C", capacity: 200},
                {name: "DESOPADEC Hall", capacity: 250},
                {name: "750 Seaters Hall A", capacity: 250},
                {name: "750 Seaters Hall B", capacity: 250},
                {name: "Sandwich Hall", capacity: 250},
                {name: "Predegree Hall", capacity: 100}
            ];
            
            const schedule = [];
            const unscheduled = [];
            const roomUsage = {};
            const lecturerUsage = {};
            const levelUsage = {};
            const lecturerHours = {};
            
            // Initialize lecturer hours
            lecturers.forEach(lec => {
                lecturerHours[lec.name] = {
                    available: lec.hours_per_week,
                    used: 0
                };
            });
            
            // Process each course
            courses.forEach(course => {
                const sessionsNeeded = Math.ceil(course.hours_per_week / 2);
                let sessionsAssigned = 0;
                
                for (let [day, time] of timeSlots) {
                    if (sessionsAssigned >= sessionsNeeded) break;
                    
                    // Check lecturer hours
                    if (lecturerHours[course.lecturer].used >= lecturerHours[course.lecturer].available) {
                        continue;
                    }
                    
                    // Check lecturer availability
                    const lecKey = `${course.lecturer}|${day}|${time}`;
                    if (lecturerUsage[lecKey]) continue;
                    
                    // Check level conflict
                    const levelKey = `${course.level}|${day}|${time}`;
                    if (levelUsage[levelKey]) continue;
                    
                    // Find suitable room
                    let roomAssigned = false;
                    for (let room of classrooms.sort((a, b) => a.capacity - b.capacity)) {
                        if (room.capacity < course.enrollment * 0.8) continue;
                        
                        const roomKey = `${room.name}|${day}|${time}`;
                        if (roomUsage[roomKey]) continue;
                        
                        // Assign!
                        schedule.push({
                            course: course.course_code,
                            title: course.title,
                            level: course.level,
                            lecturer: course.lecturer,
                            room: room.name,
                            day: day,
                            time: time,
                            enrollment: course.enrollment,
                            capacity: room.capacity
                        });
                        
                        roomUsage[roomKey] = true;
                        lecturerUsage[lecKey] = true;
                        levelUsage[levelKey] = true;
                        lecturerHours[course.lecturer].used += 2;
                        
                        sessionsAssigned++;
                        roomAssigned = true;
                        break;
                    }
                    
                    if (!roomAssigned) continue;
                }
                
                if (sessionsAssigned < sessionsNeeded) {
                    unscheduled.push({
                        ...course,
                        assigned: sessionsAssigned,
                        needed: sessionsNeeded
                    });
                }
            });
            
            return {
                schedule: schedule,
                unscheduled: unscheduled,
                lecturerHours: lecturerHours,
                stats: {
                    total: courses.length,
                    fullScheduled: courses.length - unscheduled.length,
                    totalSessions: schedule.length,
                    successRate: ((courses.length - unscheduled.length) / courses.length * 100).toFixed(1)
                }
            };
        }
        
        function displayResults(result) {
            document.getElementById('resultsSection').classList.remove('hidden');
            
            // Update stats
            document.getElementById('totalCourses').textContent = result.stats.total;
            document.getElementById('scheduledCount').textContent = result.stats.fullScheduled;
            document.getElementById('successRate').textContent = result.stats.successRate + '%';
            document.getElementById('totalSessions').textContent = result.stats.totalSessions;
            
            // Display schedule by level
            const container = document.getElementById('scheduleTableContainer');
            let html = '';
            
            [100, 200, 300, 400].forEach(level => {
                const levelSchedule = result.schedule.filter(s => s.level === level);
                if (levelSchedule.length > 0) {
                    html += `
                        <h3 style="margin-top: 30px; color: var(--deep-green);">${level} Level Courses</h3>
                        <table class="schedule-table">
                            <thead>
                                <tr>
                                    <th>Course</th>
                                    <th>Title</th>
                                    <th>Day</th>
                                    <th>Time</th>
                                    <th>Room</th>
                                    <th>Lecturer</th>
                                    <th>Students</th>
                                </tr>
                            </thead>
                            <tbody>
                    `;
                    
                    levelSchedule.forEach(entry => {
                        html += `
                            <tr>
                                <td><strong>${entry.course}</strong></td>
                                <td>${entry.title}</td>
                                <td>${entry.day}</td>
                                <td>${entry.time}</td>
                                <td>${entry.room}</td>
                                <td>${entry.lecturer}</td>
                                <td>${entry.enrollment}/${entry.capacity}</td>
                            </tr>
                        `;
                    });
                    
                    html += '</tbody></table>';
                }
            });
            
            if (result.unscheduled.length > 0) {
                html += `
                    <h3 style="margin-top: 30px; color: var(--terracotta);">Unscheduled / Partially Scheduled</h3>
                    <div style="background: rgba(193, 80, 46, 0.1); padding: 20px; border-radius: 10px; margin-top: 10px;">
                `;
                result.unscheduled.forEach(item => {
                    html += `<p>• <strong>${item.course_code}:</strong> ${item.title} - ${item.assigned}/${item.needed} sessions assigned</p>`;
                });
                html += '</div>';
            }
            
            container.innerHTML = html;
            
            // Scroll to results
            document.getElementById('resultsSection').scrollIntoView({ behavior: 'smooth' });
        }
        
        function downloadData() {
            const data = {
                lecturers: lecturers,
                courses: courses
            };
            
            const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'user_input.json';
            a.click();
        }
        
        function clearAll() {
            if (confirm('Clear all lecturers and courses? This cannot be undone.')) {
                lecturers = [];
                courses = [];
                saveData();
                displayLecturers();
                displayCourses();
                updateLecturerDropdown();
                document.getElementById('resultsSection').classList.add('hidden');
            }
        }
    </script>
</body>
</html>
